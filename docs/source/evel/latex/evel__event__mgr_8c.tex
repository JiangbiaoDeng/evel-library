\hypertarget{evel__event__mgr_8c}{}\section{evel\+\_\+event\+\_\+mgr.\+c File Reference}
\label{evel__event__mgr_8c}\index{evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}}


Event Manager.  


{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$pthread.\+h$>$}\\*
{\ttfamily \#include $<$curl/curl.\+h$>$}\\*
{\ttfamily \#include \char`\"{}evel.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}evel\+\_\+internal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ring\+\_\+buffer.\+h\char`\"{}}\\*
Include dependency graph for evel\+\_\+event\+\_\+mgr.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{evel__event__mgr_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03e}{E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} \hyperlink{evel__event__mgr_8c_a67cd17cb22fe0cf7c2598c44a4297019}{event\+\_\+handler\+\_\+initialize} (const char const $\ast$api\+\_\+url, const char const $\ast$username, const char const $\ast$password, int verbosity)
\begin{DoxyCompactList}\small\item\em Initialize the event handler. \end{DoxyCompactList}\item 
\hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03e}{E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} \hyperlink{evel__event__mgr_8c_ae4bba8673b5047aa895bcc7ead3b52b3}{event\+\_\+handler\+\_\+run} ()
\begin{DoxyCompactList}\small\item\em Run the event handler. \end{DoxyCompactList}\item 
\hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03e}{E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} \hyperlink{evel__event__mgr_8c_af84510ba54ec3152a0be0d915ef10799}{event\+\_\+handler\+\_\+terminate} ()
\begin{DoxyCompactList}\small\item\em Terminate the event handler. \end{DoxyCompactList}\item 
\hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03e}{E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} \hyperlink{evel__event__mgr_8c_a209d2e5dbffe9e11ac79ae140f4a81bd}{evel\+\_\+post\+\_\+event} (\hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$event)
\begin{DoxyCompactList}\small\item\em Post an event. \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{evel__event__mgr_8c_a1bb7d9765fc0f716b8c982920cfeca8c}{evel\+\_\+write\+\_\+callback} (void $\ast$contents, size\+\_\+t size, size\+\_\+t nmemb, void $\ast$userp)
\begin{DoxyCompactList}\small\item\em Callback function to provide returned data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Event Manager. 

Simple event manager that is responsible for taking events (Heartbeats, Faults and Measurements) from the ring-\/buffer and posting them to the A\+P\+I.

\subsubsection*{License }

Copyright(c) $<$2016$>$, A\+T\&T Intellectual Property. All other rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:


\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\item All advertising materials mentioning features or use of this software must display the following acknowledgement\+: This product includes software developed by the A\+T\&T.
\item Neither the name of A\+T\&T nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
\end{DoxyEnumerate}

T\+H\+I\+S S\+O\+F\+T\+W\+A\+R\+E I\+S P\+R\+O\+V\+I\+D\+E\+D B\+Y A\+T\&T I\+N\+T\+E\+L\+L\+E\+C\+T\+U\+A\+L P\+R\+O\+P\+E\+R\+T\+Y \textquotesingle{}\textquotesingle{}A\+S I\+S\textquotesingle{}\textquotesingle{} A\+N\+D A\+N\+Y E\+X\+P\+R\+E\+S\+S O\+R I\+M\+P\+L\+I\+E\+D W\+A\+R\+R\+A\+N\+T\+I\+E\+S, I\+N\+C\+L\+U\+D\+I\+N\+G, B\+U\+T N\+O\+T L\+I\+M\+I\+T\+E\+D T\+O, T\+H\+E I\+M\+P\+L\+I\+E\+D W\+A\+R\+R\+A\+N\+T\+I\+E\+S O\+F M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+T\+Y A\+N\+D F\+I\+T\+N\+E\+S\+S F\+O\+R A P\+A\+R\+T\+I\+C\+U\+L\+A\+R P\+U\+R\+P\+O\+S\+E A\+R\+E D\+I\+S\+C\+L\+A\+I\+M\+E\+D. I\+N N\+O E\+V\+E\+N\+T S\+H\+A\+L\+L A\+T\&T I\+N\+T\+E\+L\+L\+E\+C\+T\+U\+A\+L P\+R\+O\+P\+E\+R\+T\+Y B\+E L\+I\+A\+B\+L\+E F\+O\+R A\+N\+Y D\+I\+R\+E\+C\+T, I\+N\+D\+I\+R\+E\+C\+T, I\+N\+C\+I\+D\+E\+N\+T\+A\+L, S\+P\+E\+C\+I\+A\+L, E\+X\+E\+M\+P\+L\+A\+R\+Y, O\+R C\+O\+N\+S\+E\+Q\+U\+E\+N\+T\+I\+A\+L D\+A\+M\+A\+G\+E\+S (I\+N\+C\+L\+U\+D\+I\+N\+G, B\+U\+T N\+O\+T L\+I\+M\+I\+T\+E\+D T\+O, P\+R\+O\+C\+U\+R\+E\+M\+E\+N\+T O\+F S\+U\+B\+S\+T\+I\+T\+U\+T\+E G\+O\+O\+D\+S O\+R S\+E\+R\+V\+I\+C\+E\+S; L\+O\+S\+S O\+F U\+S\+E, D\+A\+T\+A, O\+R P\+R\+O\+F\+I\+T\+S; O\+R B\+U\+S\+I\+N\+E\+S\+S I\+N\+T\+E\+R\+R\+U\+P\+T\+I\+O\+N) H\+O\+W\+E\+V\+E\+R C\+A\+U\+S\+E\+D A\+N\+D O\+N A\+N\+Y T\+H\+E\+O\+R\+Y O\+F L\+I\+A\+B\+I\+L\+I\+T\+Y, W\+H\+E\+T\+H\+E\+R I\+N C\+O\+N\+T\+R\+A\+C\+T, S\+T\+R\+I\+C\+T L\+I\+A\+B\+I\+L\+I\+T\+Y, O\+R T\+O\+R\+T (I\+N\+C\+L\+U\+D\+I\+N\+G N\+E\+G\+L\+I\+G\+E\+N\+C\+E O\+R O\+T\+H\+E\+R\+W\+I\+S\+E) A\+R\+I\+S\+I\+N\+G I\+N A\+N\+Y W\+A\+Y O\+U\+T O\+F T\+H\+E U\+S\+E O\+F T\+H\+I\+S S\+O\+F\+T\+W\+A\+R\+E, E\+V\+E\+N I\+F A\+D\+V\+I\+S\+E\+D O\+F T\+H\+E P\+O\+S\+S\+I\+B\+I\+L\+I\+T\+Y O\+F S\+U\+C\+H D\+A\+M\+A\+G\+E. 

\subsection{Function Documentation}
\hypertarget{evel__event__mgr_8c_a209d2e5dbffe9e11ac79ae140f4a81bd}{}\index{evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}!evel\+\_\+post\+\_\+event@{evel\+\_\+post\+\_\+event}}
\index{evel\+\_\+post\+\_\+event@{evel\+\_\+post\+\_\+event}!evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}}
\subsubsection[{evel\+\_\+post\+\_\+event(\+E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R $\ast$event)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} evel\+\_\+post\+\_\+event (
\begin{DoxyParamCaption}
\item[{{\bf E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$}]{event}
\end{DoxyParamCaption}
)}\label{evel__event__mgr_8c_a209d2e5dbffe9e11ac79ae140f4a81bd}


Post an event. 

\begin{DoxyNote}{Note}
So far as the caller is concerned, successfully posting the event relinquishes all responsibility for the event -\/ the library will take care of freeing the event in due course.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em event} & The event to be posted.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status code 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em E\+V\+E\+L\+\_\+\+S\+U\+C\+C\+E\+S\+S} & On success \\
\hline
{\em One of \+::\+E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} & On failure. \\
\hline
\end{DoxyRetVals}


Definition at line 445 of file evel\+\_\+event\+\_\+mgr.\+c.

\hypertarget{evel__event__mgr_8c_a1bb7d9765fc0f716b8c982920cfeca8c}{}\index{evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}!evel\+\_\+write\+\_\+callback@{evel\+\_\+write\+\_\+callback}}
\index{evel\+\_\+write\+\_\+callback@{evel\+\_\+write\+\_\+callback}!evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}}
\subsubsection[{evel\+\_\+write\+\_\+callback(void $\ast$contents, size\+\_\+t size, size\+\_\+t nmemb, void $\ast$userp)}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t evel\+\_\+write\+\_\+callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{contents, }
\item[{size\+\_\+t}]{size, }
\item[{size\+\_\+t}]{nmemb, }
\item[{void $\ast$}]{userp}
\end{DoxyParamCaption}
)}\label{evel__event__mgr_8c_a1bb7d9765fc0f716b8c982920cfeca8c}


Callback function to provide returned data. 

Copy data into the supplied buffer, write\+\_\+callback\+::ptr, checking size limits.

\begin{DoxyReturn}{Returns}
Number of bytes placed into write\+\_\+callback\+::ptr. 0 for E\+O\+F. 
\end{DoxyReturn}


Definition at line 648 of file evel\+\_\+event\+\_\+mgr.\+c.

\hypertarget{evel__event__mgr_8c_a67cd17cb22fe0cf7c2598c44a4297019}{}\index{evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}!event\+\_\+handler\+\_\+initialize@{event\+\_\+handler\+\_\+initialize}}
\index{event\+\_\+handler\+\_\+initialize@{event\+\_\+handler\+\_\+initialize}!evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}}
\subsubsection[{event\+\_\+handler\+\_\+initialize(const char const $\ast$api\+\_\+url, const char const $\ast$username, const char const $\ast$password, int verbosity)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} event\+\_\+handler\+\_\+initialize (
\begin{DoxyParamCaption}
\item[{const char const $\ast$}]{api\+\_\+url, }
\item[{const char const $\ast$}]{username, }
\item[{const char const $\ast$}]{password, }
\item[{int}]{verbosity}
\end{DoxyParamCaption}
)}\label{evel__event__mgr_8c_a67cd17cb22fe0cf7c2598c44a4297019}


Initialize the event handler. 

Primarily responsible for getting C\+U\+R\+L ready for use.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em api\+\_\+url} & The U\+R\+L where the Vendor Event Listener A\+P\+I is expected to be. \\
\hline
\mbox{\tt in}  & {\em username} & The username for the Basic Authentication of requests. \\
\hline
\mbox{\tt in}  & {\em password} & The password for the Basic Authentication of requests. \\
\hline
 & {\em verbosity} & 0 for normal operation, positive values for chattier logs. \\
\hline
\end{DoxyParams}


Definition at line 114 of file evel\+\_\+event\+\_\+mgr.\+c.

\hypertarget{evel__event__mgr_8c_ae4bba8673b5047aa895bcc7ead3b52b3}{}\index{evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}!event\+\_\+handler\+\_\+run@{event\+\_\+handler\+\_\+run}}
\index{event\+\_\+handler\+\_\+run@{event\+\_\+handler\+\_\+run}!evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}}
\subsubsection[{event\+\_\+handler\+\_\+run()}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} event\+\_\+handler\+\_\+run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{evel__event__mgr_8c_ae4bba8673b5047aa895bcc7ead3b52b3}


Run the event handler. 

Spawns the thread responsible for handling events and sending them to the A\+P\+I.

\begin{DoxyReturn}{Returns}
Status code. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em \hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03eaa9369500f041c2898e5c2b4f07b6d152}{E\+V\+E\+L\+\_\+\+S\+U\+C\+C\+E\+S\+S}} & if everything O\+K. \\
\hline
{\em One} & of \hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03e}{E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} if there was a problem. \\
\hline
\end{DoxyRetVals}


Definition at line 333 of file evel\+\_\+event\+\_\+mgr.\+c.

\hypertarget{evel__event__mgr_8c_af84510ba54ec3152a0be0d915ef10799}{}\index{evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}!event\+\_\+handler\+\_\+terminate@{event\+\_\+handler\+\_\+terminate}}
\index{event\+\_\+handler\+\_\+terminate@{event\+\_\+handler\+\_\+terminate}!evel\+\_\+event\+\_\+mgr.\+c@{evel\+\_\+event\+\_\+mgr.\+c}}
\subsubsection[{event\+\_\+handler\+\_\+terminate()}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} event\+\_\+handler\+\_\+terminate (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{evel__event__mgr_8c_af84510ba54ec3152a0be0d915ef10799}


Terminate the event handler. 

Shuts down the event handler thread in as clean a way as possible. Sets the global exit flag and then signals the thread to interrupt it since it\textquotesingle{}s most likely waiting on the ring-\/buffer.

Having achieved an orderly shutdown of the event handler thread, clean up the c\+U\+R\+L library\textquotesingle{}s resources cleanly.

\begin{DoxyReturn}{Returns}
Status code. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em \hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03eaa9369500f041c2898e5c2b4f07b6d152}{E\+V\+E\+L\+\_\+\+S\+U\+C\+C\+E\+S\+S}} & if everything O\+K. \\
\hline
{\em One} & of \hyperlink{evel_8h_ae1f68b0d21fb98defcec46e99208a03e}{E\+V\+E\+L\+\_\+\+E\+R\+R\+\_\+\+C\+O\+D\+E\+S} if there was a problem. \\
\hline
\end{DoxyRetVals}


Definition at line 370 of file evel\+\_\+event\+\_\+mgr.\+c.

