\hypertarget{evel__event_8c}{}\section{evel\+\_\+event.\+c File Reference}
\label{evel__event_8c}\index{evel\+\_\+event.\+c@{evel\+\_\+event.\+c}}


Implementation of E\+V\+E\+L functions relating to Event Headers -\/ since Heartbeats only contain the Event Header, the Heartbeat factory function is here too.  


{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$sys/time.\+h$>$}\\*
{\ttfamily \#include \char`\"{}evel.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}evel\+\_\+internal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}metadata.\+h\char`\"{}}\\*
Include dependency graph for evel\+\_\+event.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{evel__event_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$ \hyperlink{evel__event_8c_a3f91c0b7ebd4c48dfa57f6b810f010c4}{evel\+\_\+new\+\_\+heartbeat} ()
\begin{DoxyCompactList}\small\item\em Create a new heartbeat event. \end{DoxyCompactList}\item 
void \hyperlink{evel__event_8c_a85f0ce991d0edaf92f9b7d131e37533c}{evel\+\_\+init\+\_\+header} (\hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$header)
\begin{DoxyCompactList}\small\item\em Initialize a newly created event header. \end{DoxyCompactList}\item 
int \hyperlink{evel__event_8c_a2866c526bf6f3ceab59087c4618009e2}{evel\+\_\+json\+\_\+encode\+\_\+header} (char $\ast$json, int max\+\_\+size, \hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$event)
\begin{DoxyCompactList}\small\item\em Encode the header as a J\+S\+O\+N common\+Event\+Header. \end{DoxyCompactList}\item 
void \hyperlink{evel__event_8c_a8391052fcc38b65f65422a3441b8f551}{evel\+\_\+free\+\_\+header} (\hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$event)
\begin{DoxyCompactList}\small\item\em Free an event header. \end{DoxyCompactList}\item 
int \hyperlink{evel__event_8c_a3da83fe21887e3f336b54a1f63ac95cf}{evel\+\_\+json\+\_\+encode\+\_\+event} (char $\ast$json, int max\+\_\+size, \hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$event)
\begin{DoxyCompactList}\small\item\em Encode the event as a J\+S\+O\+N event object according to A\+T\&T\textquotesingle{}s schema. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation of E\+V\+E\+L functions relating to Event Headers -\/ since Heartbeats only contain the Event Header, the Heartbeat factory function is here too. 

\subsubsection*{License }

Copyright(c) $<$2016$>$, A\+T\&T Intellectual Property. All other rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:


\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\item All advertising materials mentioning features or use of this software must display the following acknowledgement\+: This product includes software developed by the A\+T\&T.
\item Neither the name of A\+T\&T nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
\end{DoxyEnumerate}

T\+H\+I\+S S\+O\+F\+T\+W\+A\+R\+E I\+S P\+R\+O\+V\+I\+D\+E\+D B\+Y A\+T\&T I\+N\+T\+E\+L\+L\+E\+C\+T\+U\+A\+L P\+R\+O\+P\+E\+R\+T\+Y \textquotesingle{}\textquotesingle{}A\+S I\+S\textquotesingle{}\textquotesingle{} A\+N\+D A\+N\+Y E\+X\+P\+R\+E\+S\+S O\+R I\+M\+P\+L\+I\+E\+D W\+A\+R\+R\+A\+N\+T\+I\+E\+S, I\+N\+C\+L\+U\+D\+I\+N\+G, B\+U\+T N\+O\+T L\+I\+M\+I\+T\+E\+D T\+O, T\+H\+E I\+M\+P\+L\+I\+E\+D W\+A\+R\+R\+A\+N\+T\+I\+E\+S O\+F M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+T\+Y A\+N\+D F\+I\+T\+N\+E\+S\+S F\+O\+R A P\+A\+R\+T\+I\+C\+U\+L\+A\+R P\+U\+R\+P\+O\+S\+E A\+R\+E D\+I\+S\+C\+L\+A\+I\+M\+E\+D. I\+N N\+O E\+V\+E\+N\+T S\+H\+A\+L\+L A\+T\&T I\+N\+T\+E\+L\+L\+E\+C\+T\+U\+A\+L P\+R\+O\+P\+E\+R\+T\+Y B\+E L\+I\+A\+B\+L\+E F\+O\+R A\+N\+Y D\+I\+R\+E\+C\+T, I\+N\+D\+I\+R\+E\+C\+T, I\+N\+C\+I\+D\+E\+N\+T\+A\+L, S\+P\+E\+C\+I\+A\+L, E\+X\+E\+M\+P\+L\+A\+R\+Y, O\+R C\+O\+N\+S\+E\+Q\+U\+E\+N\+T\+I\+A\+L D\+A\+M\+A\+G\+E\+S (I\+N\+C\+L\+U\+D\+I\+N\+G, B\+U\+T N\+O\+T L\+I\+M\+I\+T\+E\+D T\+O, P\+R\+O\+C\+U\+R\+E\+M\+E\+N\+T O\+F S\+U\+B\+S\+T\+I\+T\+U\+T\+E G\+O\+O\+D\+S O\+R S\+E\+R\+V\+I\+C\+E\+S; L\+O\+S\+S O\+F U\+S\+E, D\+A\+T\+A, O\+R P\+R\+O\+F\+I\+T\+S; O\+R B\+U\+S\+I\+N\+E\+S\+S I\+N\+T\+E\+R\+R\+U\+P\+T\+I\+O\+N) H\+O\+W\+E\+V\+E\+R C\+A\+U\+S\+E\+D A\+N\+D O\+N A\+N\+Y T\+H\+E\+O\+R\+Y O\+F L\+I\+A\+B\+I\+L\+I\+T\+Y, W\+H\+E\+T\+H\+E\+R I\+N C\+O\+N\+T\+R\+A\+C\+T, S\+T\+R\+I\+C\+T L\+I\+A\+B\+I\+L\+I\+T\+Y, O\+R T\+O\+R\+T (I\+N\+C\+L\+U\+D\+I\+N\+G N\+E\+G\+L\+I\+G\+E\+N\+C\+E O\+R O\+T\+H\+E\+R\+W\+I\+S\+E) A\+R\+I\+S\+I\+N\+G I\+N A\+N\+Y W\+A\+Y O\+U\+T O\+F T\+H\+E U\+S\+E O\+F T\+H\+I\+S S\+O\+F\+T\+W\+A\+R\+E, E\+V\+E\+N I\+F A\+D\+V\+I\+S\+E\+D O\+F T\+H\+E P\+O\+S\+S\+I\+B\+I\+L\+I\+T\+Y O\+F S\+U\+C\+H D\+A\+M\+A\+G\+E. 

\subsection{Function Documentation}
\hypertarget{evel__event_8c_a8391052fcc38b65f65422a3441b8f551}{}\index{evel\+\_\+event.\+c@{evel\+\_\+event.\+c}!evel\+\_\+free\+\_\+header@{evel\+\_\+free\+\_\+header}}
\index{evel\+\_\+free\+\_\+header@{evel\+\_\+free\+\_\+header}!evel\+\_\+event.\+c@{evel\+\_\+event.\+c}}
\subsubsection[{evel\+\_\+free\+\_\+header(\+E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R $\ast$event)}]{\setlength{\rightskip}{0pt plus 5cm}void evel\+\_\+free\+\_\+header (
\begin{DoxyParamCaption}
\item[{{\bf E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$}]{event}
\end{DoxyParamCaption}
)}\label{evel__event_8c_a8391052fcc38b65f65422a3441b8f551}


Free an event header. 

Free off the event header supplied. Will recursively free all the contained allocated memory.

\begin{DoxyNote}{Note}
It does not free the header itself, since that may be part of a larger structure. 
\end{DoxyNote}


Definition at line 248 of file evel\+\_\+event.\+c.

\hypertarget{evel__event_8c_a85f0ce991d0edaf92f9b7d131e37533c}{}\index{evel\+\_\+event.\+c@{evel\+\_\+event.\+c}!evel\+\_\+init\+\_\+header@{evel\+\_\+init\+\_\+header}}
\index{evel\+\_\+init\+\_\+header@{evel\+\_\+init\+\_\+header}!evel\+\_\+event.\+c@{evel\+\_\+event.\+c}}
\subsubsection[{evel\+\_\+init\+\_\+header(\+E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R $\ast$header)}]{\setlength{\rightskip}{0pt plus 5cm}void evel\+\_\+init\+\_\+header (
\begin{DoxyParamCaption}
\item[{{\bf E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$}]{header}
\end{DoxyParamCaption}
)}\label{evel__event_8c_a85f0ce991d0edaf92f9b7d131e37533c}


Initialize a newly created event header. 


\begin{DoxyParams}{Parameters}
{\em header} & Pointer to the header being initialized. \\
\hline
\end{DoxyParams}


Definition at line 97 of file evel\+\_\+event.\+c.

\hypertarget{evel__event_8c_a3da83fe21887e3f336b54a1f63ac95cf}{}\index{evel\+\_\+event.\+c@{evel\+\_\+event.\+c}!evel\+\_\+json\+\_\+encode\+\_\+event@{evel\+\_\+json\+\_\+encode\+\_\+event}}
\index{evel\+\_\+json\+\_\+encode\+\_\+event@{evel\+\_\+json\+\_\+encode\+\_\+event}!evel\+\_\+event.\+c@{evel\+\_\+event.\+c}}
\subsubsection[{evel\+\_\+json\+\_\+encode\+\_\+event(char $\ast$json, int max\+\_\+size, E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R $\ast$event)}]{\setlength{\rightskip}{0pt plus 5cm}int evel\+\_\+json\+\_\+encode\+\_\+event (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{json, }
\item[{int}]{max\+\_\+size, }
\item[{{\bf E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$}]{event}
\end{DoxyParamCaption}
)}\label{evel__event_8c_a3da83fe21887e3f336b54a1f63ac95cf}


Encode the event as a J\+S\+O\+N event object according to A\+T\&T\textquotesingle{}s schema. 


\begin{DoxyParams}{Parameters}
{\em json} & Pointer to where to store the J\+S\+O\+N encoded data. \\
\hline
{\em max\+\_\+size} & Size of storage available in json\+\_\+body. \\
\hline
{\em event} & Pointer to the \hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} to encode. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes actually written. 
\end{DoxyReturn}


Definition at line 280 of file evel\+\_\+event.\+c.

\hypertarget{evel__event_8c_a2866c526bf6f3ceab59087c4618009e2}{}\index{evel\+\_\+event.\+c@{evel\+\_\+event.\+c}!evel\+\_\+json\+\_\+encode\+\_\+header@{evel\+\_\+json\+\_\+encode\+\_\+header}}
\index{evel\+\_\+json\+\_\+encode\+\_\+header@{evel\+\_\+json\+\_\+encode\+\_\+header}!evel\+\_\+event.\+c@{evel\+\_\+event.\+c}}
\subsubsection[{evel\+\_\+json\+\_\+encode\+\_\+header(char $\ast$json, int max\+\_\+size, E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R $\ast$event)}]{\setlength{\rightskip}{0pt plus 5cm}int evel\+\_\+json\+\_\+encode\+\_\+header (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{json, }
\item[{int}]{max\+\_\+size, }
\item[{{\bf E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} $\ast$}]{event}
\end{DoxyParamCaption}
)}\label{evel__event_8c_a2866c526bf6f3ceab59087c4618009e2}


Encode the header as a J\+S\+O\+N common\+Event\+Header. 


\begin{DoxyParams}{Parameters}
{\em json} & Pointer to where to staore the J\+S\+O\+N encoded data. \\
\hline
{\em max\+\_\+size} & Size of storage available in evel\+\_\+json\+\_\+encode\+\_\+header\+::json. \\
\hline
{\em event} & Pointer to the \hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R} to encode. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes actually written. 
\end{DoxyReturn}


Definition at line 138 of file evel\+\_\+event.\+c.

\hypertarget{evel__event_8c_a3f91c0b7ebd4c48dfa57f6b810f010c4}{}\index{evel\+\_\+event.\+c@{evel\+\_\+event.\+c}!evel\+\_\+new\+\_\+heartbeat@{evel\+\_\+new\+\_\+heartbeat}}
\index{evel\+\_\+new\+\_\+heartbeat@{evel\+\_\+new\+\_\+heartbeat}!evel\+\_\+event.\+c@{evel\+\_\+event.\+c}}
\subsubsection[{evel\+\_\+new\+\_\+heartbeat()}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R}$\ast$ evel\+\_\+new\+\_\+heartbeat (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{evel__event_8c_a3f91c0b7ebd4c48dfa57f6b810f010c4}


Create a new heartbeat event. 

\begin{DoxyNote}{Note}
that the heartbeat is just a \char`\"{}naked\char`\"{} common\+Event\+Header!
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
pointer to the newly manufactured \hyperlink{evel_8h_aa0ea94c675729365ea7825c4fc7e06d8}{E\+V\+E\+N\+T\+\_\+\+H\+E\+A\+D\+E\+R}. If the event is not used it must be released using \hyperlink{evel_8h_a91faa4e06c4b079c2a8a1db1ccb2e47b}{evel\+\_\+free\+\_\+event} 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em N\+U\+L\+L} & Failed to create the event. \\
\hline
\end{DoxyRetVals}


Definition at line 63 of file evel\+\_\+event.\+c.

